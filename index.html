<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Ropy IDE</title>
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
    <link rel="stylesheet" href="ropyeditor.css">
</head>
<body>
    
    <div id="topToolBar">
        <div style="float: right; margin-top:7px;margin-right:8px;">
            <button class="button" onclick="ropy.toggleDocumentation()"><i class="fa fa-book button-icon color-blue" aria-hidden="true"></i>Help</button>
            <button class="button" onclick="window.location.href='/presentation.html'"><i class="fa fa-file-powerpoint-o button-icon color-blue" aria-hidden="true"></i>Presentation</button>
        </div>
        <span id="title"><i class="fa fa-code button-icon color-yellow" aria-hidden="true"></i>Ropy IDE</span>
    </div>
    
    <div id="openDialog" class="modal" style="display: none">
        <h2 class="color-yellow">Open program</h2>
        <p><i>Click any program title to load it. To open a program from somewhere else you need to use the paste feature.</i></p>
        <p><strong style="color: #CBCB41;">BROWSER LOCAL STORAGE:</strong></p>
        <ul id="storedPrograms"></ul>
        <p><strong style="color: #CBCB41;">EXAMPLE PROGRAMS:</strong></p>
        <ul id="examplePrograms"></ul>
        <p><strong style="color: #CBCB41;">EXERCISES:</strong></p>
        <p>The exercises contain tests which you will have to write and run a Ropy program in order to make pass.</p>
        <ul id="exercises"></ul>
        <p><strong style="color: #CBCB41;">GAMES:</strong></p>
        <p>You need to tweak these programs in order to pass a particulart test. Your goal is to do it with as few changes as possible.</p>
        <ul id="games"></ul>
    </div>
    
    <div id="clipboard" class="modal" style="display: none">
        <p>Paste your source here anc click OK:</p>
        <textarea id="clipboardText" style="width: 100%; height: 200px;"></textarea>
        <button class="button" id="pasteOkButton">OK</button>
        <button class="button" id="pasteCancelButton">Cancel</button>
    </div>
    
    <div id="documentation" class="modal" style="display: none">
        <p style="text-align:center;"><strong style="color: #CBCB41;">HELP</strong></p>
        <p>
            <table style="width: 100%">
                <tr>
                    <td style="vertical-align:top;">
                        <table>
                            <tr>
                                <td colspan="2">
                                    <strong style="color: #CBCB41;">ROPY COMMANDS</strong>
                                </td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top; width:10%" class="color-yellow">+</th>
                                <td style="vertical-align: top; width:40%">Add ( n n -- n )</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top; width:10%" class="color-yellow">-</th>
                                <td style="vertical-align: top; width:40%">Subtract ( n n -- n )</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top; width:10%" class="color-yellow">*</th>
                                <td style="vertical-align: top; width:40%">Multiply ( n n -- n )</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top; width:10%" class="color-yellow">/</th>
                                <td style="vertical-align: top; width:40%">Divide ( n n -- n )</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top; width:10%" class="color-yellow">%</th>
                                <td style="vertical-align: top; width:40%">Modulo ( n n -- n )</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top; width:10%" class="color-yellow">&lt;</th>
                                <td style="vertical-align: top; width:40%">Swap ( a b -- b a )</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top; width:10%" class="color-yellow">&gt;</th>
                                <td style="vertical-align: top; width:40%">Duplicate ( a -- a a )</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top; width:10%" class="color-yellow">?</th>
                                <td style="vertical-align: top; width:40%">Pop ( a -- )</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top; width:10%" class="color-yellow">#</th>
                                <td style="vertical-align: top; width:40%">Print ( a -- )</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top; width:10%" class="color-yellow">&amp;</th>
                                <td style="vertical-align: top; width:40%">Join numbers ( a b -- ba )</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top; width:10%" class="color-yellow">!</th>
                                <td style="vertical-align: top; width:40%">Not ( n -- ? ), 0 is false</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top; width:10%" class="color-yellow">"</th>
                                <td style="vertical-align: top; width:40%">Stringify ( sequence -- string )</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top; width:10%" class="color-yellow">[</th>
                                <td style="vertical-align: top; width:40%">Store in memory ( addr value -- )</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top; width:10%" class="color-yellow">]</th>
                                <td style="vertical-align: top; width:40%">Load from memory ( addr -- value)</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top; width:10%" class="color-yellow">:</th>
                                <td style="vertical-align: top; width:40%">Call procedure ( x y -- )</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top; width:10%" class="color-yellow">;</th>
                                <td style="vertical-align: top; width:40%">Return from proceedure call ( )</td>
                            </tr>
                        </table>
                    </td>
                    <td style="vertical-align:top;">
                        
                        <table>
                            <tr>
                                <td colspan="2">
                                    <strong style="color: #CBCB41;">EDITOR MOVEMENT</strong>
                                </td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top;text-align: left; width:10%"><nobr>Arrow keys</nobr></th>
                                <td style="vertical-align: top;width:40%">Use the arrow keys to move around the grid</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top;text-align: left; width:10%"><nobr>Home</nobr></th>
                                <td style="vertical-align: top;width:40%">Move cursor to first column</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top;text-align: left; width:10%"><nobr>End</nobr></th>
                                <td style="vertical-align: top;width:40%">Move cursor to last column</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top;text-align: left; width:10%"><nobr>PageUp</nobr></th>
                                <td style="vertical-align: top;width:40%">Move cursor to first row</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top;text-align: left; width:10%"><nobr>PageDown</nobr></th>
                                <td style="vertical-align: top;width:40%">Move cursor to last row</td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <strong style="color: #CBCB41;">EDITOR AREA COMMANDS</strong>
                                </td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top;text-align: left; width:10%"><nobr>Ctrl + right arrow</nobr></th>
                                <td style="vertical-align: top;width:40%">Expand source area width</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top;text-align: left; width:10%"><nobr>Ctrl + down arrow</nobr></th>
                                <td style="vertical-align: top; width:40%">Expand source area height</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top;text-align: left; width:10%"><nobr>Ctrl + Enter</nobr></th>
                                <td style="vertical-align: top; width:40%">Insert row below cursor</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top;text-align: left; width:10%"><nobr>Ctrl + Shift + Enter</nobr></th>
                                <td style="vertical-align: top; width:40%">Insert row above cursor</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top;text-align: left; width:10%"><nobr>Ctrl + Alt + Enter</nobr></th>
                                <td style="vertical-align: top; width:40%">Insert column right of cursor</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top;text-align: left; width:10%"><nobr>Ctrl + Alt + Shift + Enter</nobr></th>
                                <td style="vertical-align: top; width:40%">Insert column left of cursor</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top;text-align: left; width:10%"><nobr>Ctrl + x</nobr></th>
                                <td style="vertical-align: top; width:40%">Cut row at cursor</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top;text-align: left; width:10%"><nobr>Ctrl + Alt + x</nobr></th>
                                <td style="vertical-align: top; width:40%">Cut column at cursor</td>
                            </tr>
                            <tr>
                                <th style="vertical-align: top;text-align: left; width:10%"><nobr>Ctrl + r</nobr></th>
                                <td style="vertical-align: top; width:40%">Crop</td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
            
        </p>
    </div>
    
    <div id="screenEditor" class="centerDivWrapper">
        <div class="centerDiv">
            <div style="margin-bottom:4px;">
                <div style="float:right;margin-top:8px;">
                    <span class="toolbar-info" id="infoStorage">Unsaved</span>
                    <span class="toolbar-info" id="infoToken"></span>
                    <span class="toolbar-info" id="infoDirection">right</span>
                    <span class="toolbar-info" id="infoDimensions">dim</span>
                </div>
                <button class="button" id="openButton"><i class="fa fa-folder-open button-icon color-blue" aria-hidden="true"></i>Open</button>
                <button class="button" id="saveButton"><i class="fa fa-floppy-o button-icon color-blue" aria-hidden="true"></i>Save</button>
                <button class="button" id="pasteButton"><i class="fa fa-clipboard button-icon color-blue" aria-hidden="true"></i>Paste</button>
                <button class="button" id="cropButton"><i class="fa fa-crop button-icon color-blue" aria-hidden="true"></i>Crop</button>
                <button class="button" id="clearButton"><i class="fa fa-trash button-icon color-orange" aria-hidden="true"></i>Clear</button>
                <button class="button" id="runButton"><i class="fa fa-bug button-icon color-yellow" aria-hidden="true"></i>Debugger</button>
            </div>
            <div id="editor"></div>            
        </div>
    </div>
    
    
    <div id="screenDebugger" class="centerDivWrapper" style="display: none">
        <div class="centerDiv">
            <div style="margin-bottom:4px;">
                <button class="button" id="closeDebuggerButton"><i class="fa fa-window-close button-icon color-orange" aria-hidden="true"></i>Exit debugger</button>
                <button class="button" id="rewindDebuggerButton"><i class="fa fa-fast-backward button-icon color-yellow" aria-hidden="true"></i>Rewind</button>
                <button class="button" id="pauseDebuggerButton"><i class="fa fa-pause button-icon color-yellow" aria-hidden="true"></i>Pause</button>
                <button class="button" id="runDebuggerButton"><i class="fa fa-play button-icon color-yellow" aria-hidden="true"></i>Play</button>
                <button class="button" id="stepDebuggerButton"><i class="fa fa-step-forward button-icon color-yellow" aria-hidden="true"></i>Step</button>
                <button class="button" id="speedUpButton"><i class="fa fa-fighter-jet button-icon color-blue" aria-hidden="true"></i>Faster</button>
                <button class="button" id="speedDownButton"><i class="fa fa-snowflake-o button-icon color-blue" aria-hidden="true"></i>Slower</button>
            </div>
            
            <div class="container block-formatting-context">
                <div class="debuggerSidebar">
                    <table style="width:100%">
                        <tr>
                            <td style="padding-bottom:8px;">Iteration count</td>
                            <td style="text-align:right" id="iterationCount">0</td>
                        </tr>
                        <tr>
                            <td style="padding-bottom:8px;">Sleep length</td>
                            <td style="text-align:right" id="sleepLength">0 ms</td>
                        </tr>
                        <tr>
                            <td style="padding-bottom:8px;">Current token</td>
                            <td style="text-align:right" id="currentToken"></td>
                        </tr>
                        <tr>
                            <td style="padding-bottom:8px;">Instruction Pointer</td>
                            <td style="text-align:right" id="instructionPointer">x, y</td>
                        </tr>
                        <tr>
                            <td style="padding-bottom:8px;">Direction</td>
                            <td style="text-align:right" id="currentDirection">?</td>
                        </tr>
                        <tr>
                            <td style="padding-bottom:8px;">Program done</td>
                            <td style="text-align:right" id="isDone">?</td>
                        </tr>
                        <tr>
                            <td style="padding-bottom:8px;" colspan=2 class="tdSectionStart">
                                Output
                                <div id="output"></div>
                            </td>
                        </tr>
                        <tr>
                            <td style="padding-bottom:8px;" colspan=2 class="tdSectionStart">
                                Data Stack
                                <div id="dataStack"></div>
                            </td>
                        </tr>
                        <tr>
                            <td style="padding-bottom:8px;" colspan=2 class="tdSectionStart">Return Stack</td>
                        </tr>
                        <tr>
                            <td style="padding-bottom:8px;" colspan=2 class="tdSectionStart">
                                Memory
                                <div id="memory"></div>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="debuggerGrid">
                    <div id="debuggerGrid" class="block-formatting-context">
                    </div>
                </div>
            </div>
            
            
        </div>
    </div>
    
    <script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.11/lodash.min.js"></script>
    <script src="request.js"></script>
    <script src="ropy.js"></script>
    <script src="ropystorage.js"></script>
    <script src="ropyeditor.js"></script>
    <script src="ropydebugger.js"></script>
    <script src="main.js"></script>
</body>
</html>